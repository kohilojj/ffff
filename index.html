<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Medical Student Simulator</title>
    <style>
        :root { --med-blue: #007ac9; --med-green: #64be1e; --med-red: #d81921; }
        body { margin: 0; font-family: 'Segoe UI', sans-serif; background: #f0f4f8; display: flex; justify-content: center; }
        
        .game-wrapper { width: 100%; max-width: 500px; background: #fff; min-height: 100vh; display: flex; flex-direction: column; box-shadow: 0 0 20px rgba(0,0,0,0.1); }
        
        .header { background: var(--med-blue); color: white; padding: 20px; text-align: center; font-weight: bold; font-size: 20px; }
        
        .stats { display: flex; justify-content: space-around; background: #e1f5fe; padding: 10px; font-size: 14px; font-weight: bold; border-bottom: 2px solid #b3e5fc; }

        .content { padding: 20px; flex-grow: 1; }
        
        .patient-card { background: #fff; border: 2px solid #eee; border-radius: 12px; padding: 20px; margin-bottom: 20px; position: relative; }
        .patient-speech { font-style: italic; color: #444; font-size: 18px; margin-bottom: 15px; display: block; }
        
        .action-label { font-size: 12px; font-weight: bold; color: #999; text-transform: uppercase; margin-bottom: 10px; display: block; }
        
        .btn { 
            width: 100%; padding: 15px; margin-bottom: 10px; border: none; border-radius: 8px; 
            font-size: 16px; font-weight: bold; cursor: pointer; transition: 0.2s; 
        }
        .btn-test { background: #f0f0f0; color: #333; }
        .btn-test:hover { background: #e0e0e0; }
        .btn-diag { background: var(--med-green); color: white; margin-top: 10px; }
        .btn-diag:hover { opacity: 0.9; }

        .result-overlay { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.8); color: white; display: none; 
            flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: 20px; z-index: 100;
        }

        .disclaimer { font-size: 10px; color: #bbb; padding: 20px; background: #fafafa; border-top: 1px solid #eee; line-height: 1.4; }
    </style>
</head>
<body>

<div class="game-wrapper">
    <div class="header">ü©∫ OYS: P√§ivystyssimulaattori</div>
    
    <div class="stats">
        <div>Pisteet: <span id="score">0</span></div>
        <div>Potilas: <span id="round">1</span>/3</div>
    </div>

    <div class="content">
        <div class="patient-card">
            <span class="action-label">Potilaan oireet:</span>
            <span class="patient-speech" id="speech">"Lataa peli..."</span>
            <div id="test-results" style="font-size: 14px; color: var(--med-blue); font-weight: bold;"></div>
        </div>

        <span class="action-label">M√§√§r√§√§ tutkimus:</span>
        <button class="btn btn-test" onclick="doTest('lab')">üíâ Verikokeet (CRP/PVK)</button>
        <button class="btn btn-test" onclick="doTest('img')">üì∑ Kuvantaminen (R√∂ntgen/U√Ñ)</button>

        <span class="action-label" style="margin-top: 20px;">Aseta diagnoosi:</span>
        <div id="diag-buttons"></div>
    </div>

    <div class="disclaimer">
        <b>VASTUUVAPAUTUS:</b> T√§m√§ on peli. L√§√§ketieteelliset tiedot on yksinkertaistettu viihteeksi. 
        <b>Yll√§pito ei vastaa mist√§√§n saatanan mist√§√§n</b>, jos joku yritt√§√§ diagnosoida itse√§√§n t√§m√§n perusteella. 
        Mene oikeaan sairaalaan jos olet kipe√§.
    </div>
</div>

<div id="result-overlay" class="result-overlay">
    <h1 id="res-title">Oikein!</h1>
    <p id="res-text"></p>
    <button class="btn" style="width: auto; padding: 10px 40px;" onclick="nextCase()">Seuraava potilas</button>
</div>

<script>
    let score = 0;
    let currentCase = 0;

    const cases = [
        {
            speech: "Minulla on kova vatsakipu oikealla alhaalla. Olen my√∂s oksentanut.",
            lab: "CRP koholla (85), valkosolut korkealla.",
            img: "U√Ñ-tutkimus n√§ytt√§√§ paksuntuneen umpisuolen.",
            options: ["Umpisuolentulehdus", "Vatsatauti", "Munuaiskivi"],
            correct: "Umpisuolentulehdus",
            fact: "Umpisuolentulehdus (appendisiitti) vaatii usein leikkaushoitoa."
        },
        {
            speech: "Rinnassa tuntuu valtavaa puristusta ja kipu s√§teilee leukaan.",
            lab: "Troponiiniarvot (TnT) ovat nousussa.",
            img: "Syd√§men ultra√§√§ness√§ n√§kyy liikeh√§iri√∂.",
            options: ["N√§r√§stys", "Syd√§ninfarkti", "Keuhkokuume"],
            correct: "Syd√§ninfarkti",
            fact: "Aika on lihasta ‚Äì syd√§ninfarkti vaatii v√§lit√∂nt√§ hoitoa!"
        },
        {
            speech: "P√§√§t√§ni s√§rkee siet√§m√§tt√∂m√§sti ja valo sattuu silmiin. Niskakin on j√§ykk√§.",
            lab: "Selk√§ydinnesten√§yte n√§ytt√§√§ bakteereja.",
            img: "P√§√§n tietokonekuvauksessa ei n√§y verenvuotoa.",
            options: ["Migreeni", "Aivokalvontulehdus", "Krapula"],
            correct: "Aivokalvontulehdus",
            fact: "Meningiitti eli aivokalvontulehdus on hengenvaarallinen h√§t√§tilanne."
        }
    ];

    function loadCase() {
        const c = cases[currentCase];
        document.getElementById('speech').innerText = `"${c.speech}"`;
        document.getElementById('test-results').innerText = "";
        document.getElementById('round').innerText = currentCase + 1;
        
        const diagDiv = document.getElementById('diag-buttons');
        diagDiv.innerHTML = "";
        c.options.forEach(opt => {
            const btn = document.createElement('button');
            btn.className = "btn btn-diag";
            btn.innerText = opt;
            btn.onclick = () => checkDiag(opt);
            diagDiv.appendChild(btn);
        });
    }

    function doTest(type) {
        const c = cases[currentCase];
        document.getElementById('test-results').innerText = type === 'lab' ? c.lab : c.img;
        score -= 10; // Tutkimukset maksavat pisteit√§
        document.getElementById('score').innerText = score;
    }

    function checkDiag(choice) {
        const c = cases[currentCase];
        const overlay = document.getElementById('result-overlay');
        const title = document.getElementById('res-title');
        const text = document.getElementById('res-text');

        if (choice === c.correct) {
            score += 100;
            title.innerText = "OIKEIN! ‚úÖ";
            title.style.color = "var(--med-green)";
            text.innerText = c.fact;
        } else {
            score -= 50;
            title.innerText = "V√Ñ√ÑRIN! ‚ùå";
            title.style.color = "var(--med-red)";
            text.innerText = `Oikea diagnoosi olisi ollut ${c.correct}. Potilaan tila heikkeni.`;
        }
        
        document.getElementById('score').innerText = score;
        overlay.style.display = "flex";
    }

    function nextCase() {
        currentCase++;
        document.getElementById('result-overlay').style.display = "none";
        if (currentCase < cases.length) {
            loadCase();
        } else {
            document.querySelector('.content').innerHTML = `<h2>Kierros p√§√§ttyi!</h2><p>Lopulliset pisteet: <strong>${score}</strong></p><button class="btn btn-diag" onclick="location.reload()">Pelaa uudelleen</button>`;
        }
    }

    loadCase();
</script>

</body>
</html>
