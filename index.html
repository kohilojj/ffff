<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Jassu ja Jepu Peli</title>
    <script src="https://cdn.jsdelivr.net/npm/matter-js@0.19.0/build/matter.min.js"></script>
    <style>
        body { margin: 0; padding: 0; overflow: hidden; background-color: #87CEEB; }
        #scoreBoard {
            position: absolute;
            top: 20px;
            left: 20px;
            color: white;
            font-family: 'Arial', sans-serif;
            font-size: 32px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            z-index: 100;
            pointer-events: none;
        }
    </style>
</head>
<body>

<div id="scoreBoard">Pisteet: 0</div>

<script>
    // Alustus
    const Engine = Matter.Engine,
        Render = Matter.Render,
        Runner = Matter.Runner,
        Bodies = Matter.Bodies,
        Composite = Matter.Composite,
        Mouse = Matter.Mouse,
        MouseConstraint = Matter.MouseConstraint;

    const engine = Engine.create();
    const render = Render.create({
        element: document.body,
        engine: engine,
        options: {
            width: window.innerWidth,
            height: window.innerHeight,
            wireframes: false,
            background: '#87CEEB'
        }
    });

    // Luodaan lattia
    const ground = Bodies.rectangle(window.innerWidth/2, window.innerHeight + 25, window.innerWidth, 50, { isStatic: true });
    Composite.add(engine.world, ground);

    // Pistelasku
    let score = 0;
    const scoreDiv = document.getElementById('scoreBoard');

    // Luodaan palloja
    function dropFace() {
        const x = Math.random() * window.innerWidth;
        const isJassu = Math.random() > 0.5;
        
        const face = Bodies.circle(x, -50, 40, {
            restitution: 0.8,
            render: {
                // TÄRKEÄ: Jos kuvat ei toimi, nämä värit näkyvät
                fillStyle: isJassu ? 'yellow' : 'pink',
                sprite: {
                    texture: isJassu ? 'jassu.png' : 'jepu.png',
                    xScale: 0.2,
                    yScale: 0.2
                }
            }
        });

        face.label = "naama";
        Composite.add(engine.world, face);
    }

    // Hiirikontrolli klikkaamiseen
    const mouse = Mouse.create(render.canvas);
    const mouseConstraint = MouseConstraint.create(engine, {
        mouse: mouse,
        constraint: { stiffness: 0.2, render: { visible: false } }
    });
    Composite.add(engine.world, mouseConstraint);

    // Klikkaustapahtuma
    Matter.Events.on(mouseConstraint, 'mousedown', function(event) {
        const mousePosition = event.mouse.position;
        const bodies = Composite.allBodies(engine.world);

        for (let i = 0; i < bodies.length; i++) {
            const body = bodies[i];
            if (body.label === "naama" && Matter.Bounds.contains(body.bounds, mousePosition)) {
                Composite.remove(engine.world, body);
                score += 10;
                scoreDiv.innerText = "Pisteet: " + score;
                break;
            }
        }
    });

    // Ajetaan peli
    Render.run(render);
    Runner.run(Runner.create(), engine);

    // Tiputetaan uusi pallo sekunnin välein
    setInterval(dropFace, 1000);

</script>
</body>
</html>
