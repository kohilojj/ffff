<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <title>Jassu & Jepu: Koominen Kasvotsunami</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
    <style>
        body { margin: 0; overflow: hidden; background: #87CEEB; font-family: 'Comic Sans MS', cursive; }
        #ui { position: absolute; top: 10px; left: 10px; pointer-events: none; }
        #score { font-size: 30px; color: white; text-shadow: 2px 2px 0 #000; }
        .instrukti { position: absolute; bottom: 10px; width: 100%; text-align: center; color: white; }
    </style>
</head>
<body>

<div id="ui">
    <div id="score">Pisteet: 0</div>
</div>
<div class="instrukti">Klikkaa palloja ennen kuin ne valtaavat maailman!</div>

<script>
    const { Engine, Render, Runner, Bodies, Composite, Mouse, MouseConstraint, Events } = Matter;

    const engine = Engine.create();
    const render = Render.create({
        element: document.body,
        engine: engine,
        options: {
            width: window.innerWidth,
            height: window.innerHeight,
            wireframes: false, // Jotta kuvat näkyvät
            background: 'transparent'
        }
    });

    // Luodaan seinät, jotta pallot pysyvät ruudulla
    const ground = Bodies.rectangle(window.innerWidth/2, window.innerHeight + 30, window.innerWidth, 60, { isStatic: true });
    const leftWall = Bodies.rectangle(-30, window.innerHeight/2, 60, window.innerHeight, { isStatic: true });
    const rightWall = Bodies.rectangle(window.innerWidth + 30, window.innerHeight/2, 60, window.innerHeight, { isStatic: true });
    Composite.add(engine.world, [ground, leftWall, rightWall]);

    let score = 0;

    // Funktio, joka luo putoavan naaman
    function spawnFace() {
        const x = Math.random() * window.innerWidth;
        const isJassu = Math.random() > 0.5;
        const texture = isJassu ? 'jassu.png' : 'jepu.png'; // Lisää nämä kuvat repoosi!

        const face = Bodies.circle(x, -50, 40, {
            restitution: 0.8, // Pomppivuus
            render: {
                sprite: {
                    texture: texture,
                    xScale: 0.2, // Säädä kuvan kokoa
                    yScale: 0.2
                }
            }
        });

        face.label = "clickable";
        Composite.add(engine.world, face);
    }

    // Hiirikontrolli klikkaamista varten
    const mouse = Mouse.create(render.canvas);
    const mouseConstraint = MouseConstraint.create(engine, {
        mouse: mouse,
        constraint: { stiffness: 0.2, render: { visible: false } }
    });

    // Tunnistetaan klikkaus (koominen poisto)
    Events.on(mouseConstraint, "mousedown", function(event) {
        const mousePosition = event.mouse.position;
        const bodies = Composite.allBodies(engine.world);
        
        for (let i = 0; i < bodies.length; i++) {
            const body = bodies[i];
            if (body.label === "clickable" && Matter.Bounds.contains(body.bounds, mousePosition)) {
                Composite.remove(engine.world, body);
                score += 10;
                document.getElementById('score').innerText = "Pisteet: " + score;
                break;
            }
        }
    });

    // Tiputetaan uusi naama 1.5 sekunnin välein
    setInterval(spawnFace, 1500);

    Render.run(render);
    Runner.run(Runner.create(), engine);
</script>
</body>
</html>
